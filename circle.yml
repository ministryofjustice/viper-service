machine:
  node:
    version: 6.10.0

general:
  branches:
    ignore:
        - deploy-to-dev

test:
  override:
    - npm run test-report:
        environment:
          MOCHA_FILE: $CIRCLE_TEST_REPORTS/junit/test-results.xml
    - npm run-script docs-test

deployment:
  mock:
    branch: master
    commands:
      - echo "TODO: build stuff" | tee temp.txt
      - git add --force --verbose temp.txt
      - git config user.name "Circle CI"
      - git config user.email "circle@circleci.com"
      - |
          CI_MESSAGE=$(git log --format=%B -n 1 $CIRCLE_SHA1)
          git commit -m "Deployment of build $CIRCLE_BUILD_NUM" -m "$CI_MESSAGE" -m "From gitref $CIRCLE_SHA1"
      - git push --force origin HEAD:deploy-to-dev

